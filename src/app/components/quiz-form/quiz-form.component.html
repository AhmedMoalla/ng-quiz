<div class="container">
  <form class="row" [formGroup]="rootForm" (submit)="onSubmit()">
    <div class="col-6">
      <div class="row">
        <mat-form-field appearance="outline" class="col-12">
          <mat-label>Title</mat-label>
          <input matInput required formControlName="title" />
          <mat-icon matSuffix>title</mat-icon>
          <mat-error>Title is <strong>required</strong></mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" class="col-12">
          <mat-label>Category</mat-label>
          <mat-select formControlName="category">
            <mat-option></mat-option>
          </mat-select>
          <mat-icon matSuffix>category</mat-icon>
        </mat-form-field>
        <mat-form-field appearance="outline" class="col-12">
          <mat-label>Description</mat-label>
          <textarea
            rows="10"
            matInput
            required
            formControlName="description"
          ></textarea>
          <mat-icon matSuffix>description</mat-icon>
          <mat-error>Description is <strong>required</strong></mat-error>
          <!-- Max chars 420 -->
        </mat-form-field>
      </div>
    </div>
    <div class="col-6">
      <div class="row">
        <mat-form-field appearance="outline" class="col-12">
          <mat-label>Difficulty</mat-label>
          <mat-select required formControlName="difficulty">
            <mat-option *ngFor="let difficulty of difficulties" [value]="difficulty">{{difficulty}}</mat-option>
          </mat-select>
          <mat-icon matSuffix>show_chart</mat-icon>
          <mat-error>Difficulty is <strong>required</strong></mat-error>
        </mat-form-field>
        <div class="col-12">
          <div class="questions">
            <div class="questions-title">
              Questions
              <div class="spacer"></div>
              <button mat-button color="primary" (click)="addQuestion(rootForm.controls.questions)">
                <mat-icon>add</mat-icon>
                <span>ADD A QUESTION</span>
              </button>
            </div>
            <mat-tab-group [selectedIndex]="activeQuestionIndex">
              <mat-tab *ngFor="let questionFormGroup of rootForm.controls.questions.controls; let i = index" [label]="'Question ' + (i + 1)">
                <div class="question-container" [formGroup]="questionFormGroup">
                  <mat-form-field appearance="outline">
                    <mat-label>Question</mat-label>
                    <input matInput required formControlName="question"/>
                    <mat-icon matSuffix>help_outline</mat-icon>
                  </mat-form-field>
                  <div class="answers">
                    <div class="answers-wrapper">
                      <div class="answer" *ngFor="let answerFormGroup of questionFormGroup.controls.answers.controls; let j = index" [formGroup]="answerFormGroup">
                        <mat-form-field appearance="outline">
                          <mat-label>Answer {{ j + 1 }}</mat-label>
                          <input matInput required formControlName="answer"/>
                          <mat-checkbox
                            matSuffix
                            matTooltip="Correct Answer"
                            matTooltipPosition="above"
                            formControlName="isCorrect"
                          ></mat-checkbox>
                        </mat-form-field>
                      </div>
                    </div>
                    <button mat-button color="primary" (click)="addAnswer(questionFormGroup.controls.answers)">
                      <mat-icon>add_outline</mat-icon>
                      <span>ADD AN ANSWER</span>
                    </button>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
          <button mat-raised-button color="primary" type="submit">
            <mat-icon>add</mat-icon>
            <span>CREATE QUIZ</span>
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
